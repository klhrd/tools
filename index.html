<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>æˆ‘çš„å°å“å°ˆæ¡ˆç´¢å¼•</title>
    <style>
        body { font-family: -apple-system, sans-serif; line-height: 1.6; padding: 40px; background: #fafafa; color: #333; }
        .project-group { background: white; border: 1px solid #ddd; border-radius: 8px; margin-bottom: 20px; overflow: hidden; }
        .project-title { background: #f0f0f0; padding: 10px 20px; font-weight: bold; border-bottom: 1px solid #ddd; }
        .file-list { padding: 10px 20px; list-style: none; margin: 0; }
        .file-item { margin: 5px 0; }
        a { color: #0366d6; text-decoration: none; }
        a:hover { text-decoration: underline; }
        .version-tag { font-size: 0.85em; color: #666; background: #eee; padding: 2px 6px; border-radius: 4px; margin-right: 8px; }
    </style>
</head>
<body>
    <h1>ğŸš€ å°ˆæ¡ˆè‡ªå‹•ç´¢å¼•</h1>
    <div id="container">è¼‰å…¥ä¸­...</div>

    <script>
        const USER = 'klhrd'; 
        const REPO = 'tools';
        // ä½¿ç”¨ recursive=1 æŠ“å–æ‰€æœ‰å±¤ç´šçš„æª”æ¡ˆ
        const API_URL = `https://api.github.com/repos/${USER}/${REPO}/git/trees/main?recursive=1`;

        async function init() {
            try {
                const res = await fetch(API_URL);
                const json = await res.json();
                const container = document.getElementById('container');
                container.innerHTML = '';

                // 1. ç¯©é¸å‡ºæ‰€æœ‰çš„ HTML æª”æ¡ˆï¼ˆæ’é™¤æ‰ index.html è‡ªèº«ï¼‰
                const htmlFiles = json.tree.filter(item => 
                    item.path.endsWith('.html') && item.path !== 'index.html'
                );

                // 2. ä¾ç…§ç¬¬ä¸€å±¤è³‡æ–™å¤¾åç¨±åˆ†çµ„
                const groups = {};
                htmlFiles.forEach(file => {
                    const parts = file.path.split('/');
                    const groupName = parts.length > 1 ? parts[0] : 'æ ¹ç›®éŒ„å°ˆæ¡ˆ';
                    if (!groups[groupName]) groups[groupName] = [];
                    groups[groupName].push(file);
                });

                // 3. æ¸²æŸ“ç•«é¢
                for (const [name, files] of Object.entries(groups)) {
                    const section = document.createElement('div');
                    section.className = 'project-group';
                    section.innerHTML = `<div class="project-title">ğŸ“ ${name}</div>`;
                    
                    const ul = document.createElement('ul');
                    ul.className = 'file-list';
                    
                    files.forEach(f => {
                        const li = document.createElement('li');
                        li.className = 'file-item';
                        // é¡¯ç¤ºå®Œæ•´è·¯å¾‘æˆ–æª”æ¡ˆå
                        li.innerHTML = `<a href="./${f.path}">ğŸ“„ ${f.path.replace(name + '/', '')}</a>`;
                        ul.appendChild(li);
                    });
                    
                    section.appendChild(ul);
                    container.appendChild(section);
                }
            } catch (e) {
                container.innerHTML = 'è®€å–å¤±æ•—ï¼Œè«‹ç¢ºèªå¸³è™Ÿèˆ‡ Repo åç¨±æ˜¯å¦æ­£ç¢ºã€‚';
            }
        }
        init();
    </script>
</body>
</html>